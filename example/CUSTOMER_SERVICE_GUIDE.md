# 智能客服系统 - Func-Agent 配置示例

## 概述

这是一个基于 Lynxe 的智能客服系统配置示例，展示了如何使用 Func-Agent 实现复杂的客服场景自动化处理。

## 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                   customer-service-router                    │
│                      (客服路由中心)                           │
│  根据用户问题类型，智能分发到专业的客服团队                    │
└─────────────────────────────────────────────────────────────┘
         │              │              │              │
         ▼              ▼              ▼              ▼
┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│ 售前咨询团队  │ │ 订单服务团队  │ │ 技术支持团队  │ │ 客户关怀团队  │
└──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘
         │
         ▼
┌──────────────┐
│ 账户安全团队  │
└──────────────┘
```

## Func-Agent 列表

### 1. customer-service-router (客服路由中心)

**功能**: 智能识别用户问题类型并路由到对应团队

**支持的路由类型**:
- 产品咨询、功能介绍、价格询问 → 售前咨询团队
- 订单查询、物流追踪、退换货 → 订单服务团队
- 产品使用问题、操作指导、故障排除 → 技术支持团队
- 投诉建议、意见反馈、售后服务 → 客户关怀团队
- 账户问题、密码重置、权限管理 → 账户安全团队

**输入参数**:
```json
{
  "用户问题": "你们的产品多少钱？",
  "用户ID": "user_12345",
  "订单号": "ORD-2024-001"
}
```

---

### 2. pre-sales-team (售前咨询团队)

**功能**: 处理产品咨询、功能介绍、价格询问等

**核心能力**:
- 介绍产品特点和优势
- 详细说明功能使用场景
- 提供准确的价格信息
- 推荐适合的产品方案

**可调用工具**:
- `knowledge-base-search` - 知识库搜索
- `product-catalog-query` - 产品目录查询
- `pricing-calculator` - 价格计算器

**示例对话**:
```
用户: 你们的企业版多少钱？
客服: 您好！企业版采用定制化定价，根据团队规模和需求配置。
       基础企业版起价 999 元/月，包含无限协作空间、专属客服
       和定制培训。我可以安排销售顾问联系您，提供详细报价...
```

---

### 3. order-service-team (订单服务团队)

**功能**: 处理订单查询、物流追踪、退换货等

**核心能力**:
- 查询订单状态和详情
- 追踪物流信息
- 处理退换货申请
- 协助订单修改

**可调用工具**:
- `order-status-query` - 订单状态查询
- `logistics-tracking` - 物流追踪
- `return-policy-query` - 退换货政策查询
- `order-modification` - 订单修改

**示例对话**:
```
用户: 我的订单 ORD-2024-001 发货了吗？
客服: 我帮您查询一下... 您的订单已于 2024-01-20 发货，
       物流单号：SF1234567890，预计明天送达。
       您可以通过顺丰官网实时追踪物流进度。
```

---

### 4. technical-support-team (技术支持团队)

**功能**: 处理产品使用问题、操作指导、故障排除

**核心能力**:
- 诊断技术问题
- 提供操作步骤指导
- 故障排查和解决
- 性能优化建议

**可调用工具**:
- `knowledge-base-search` - 知识库搜索
- `troubleshooting-guide` - 故障排查指南
- `faq-query` - 常见问题查询
- `system-status-check` - 系统状态检查
- `ticket-escalation` - 工单升级

**示例对话**:
```
用户: 文档同步失败，一直显示加载中
客服: 我理解您的困扰。让我们一步步排查这个问题：
       1. 请检查网络连接是否正常
       2. 尝试刷新页面或重新登录
       3. 如果问题持续，可以尝试清除缓存
       您现在看到的具体错误信息是什么？
```

---

### 5. customer-care-team (客户关怀团队)

**功能**: 处理投诉建议、意见反馈、售后服务

**核心能力**:
- 处理用户投诉
- 收集产品建议
- 售后服务协调
- 用户满意度跟进

**可调用工具**:
- `feedback-record` - 反馈记录
- `compensation-policy` - 补偿政策查询
- `ticket-create` - 工单创建
- `followup-schedule` - 跟进安排

**示例对话**:
```
用户: 我要投诉！用了两天就出问题，太失望了
客服: 非常抱歉给您带来不好的体验。我完全理解您的沮丧，
       请告诉我具体遇到了什么问题，我会尽全力为您解决。
       同时，作为补偿，我们可以为您延长一个月的服务时间...
```

---

### 6. account-security-team (账户安全团队)

**功能**: 处理账户问题、密码重置、权限管理

**核心能力**:
- 身份验证
- 密码重置
- 账号找回
- 权限管理
- 安全审计

**可调用工具**:
- `identity-verification` - 身份验证
- `password-reset` - 密码重置
- `account-status-check` - 账户状态检查
- `security-log-query` - 安全日志查询
- `two-factor-auth` - 双重验证

**示例对话**:
```
用户: 我忘记密码了，怎么办？
客服: 别担心，我可以帮您重置密码。为了保障账户安全，
       请先提供您的注册邮箱或手机号进行身份验证...
```

---

## 使用方法

### 方式 1: 通过 API 调用

```bash
curl -X POST http://localhost:18080/api/executor/executeByToolNameAsync \
  -H "Content-Type: application/json" \
  -d '{
    "toolName": "customer-service-router",
    "serviceGroup": "customer-service",
    "replacementParams": {
      "用户问题": "你们的产品多少钱？",
      "用户ID": "user_12345"
    }
  }'
```

### 方式 2: 导入到 Lynxe 系统

1. 打开 Lynxe 管理界面
2. 进入"计划模板"管理
3. 点击"导入模板"
4. 选择 `smart-customer-service.json` 文件
5. 系统会自动创建所有 Func-Agent

---

## 配置说明

### toolConfig 配置项

```json
{
  "toolDescription": "工具描述，用于前端显示",
  "enableInternalToolcall": true,    // 是否启用内部工具调用
  "enableHttpService": true,          // 是否启用 HTTP 服务
  "enableInConversation": true,       // 是否在对话中可用
  "publishStatus": "PUBLISHED",       // 发布状态
  "inputSchema": [                    // 输入参数定义
    {
      "name": "参数名称",
      "description": "参数描述",
      "type": "string",
      "required": true
    }
  ]
}
```

### 参数替换机制

使用 `<<参数名>>` 语法进行参数替换：

```json
"stepRequirement": "用户的问题是：<<用户问题>>"
```

调用时：
```json
{
  "replacementParams": {
    "用户问题": "怎么重置密码？"
  }
}
```

实际执行：
```
用户的问题是：怎么重置密码？
```

---

## 扩展建议

### 1. 添加更多客服团队

可以继续扩展：
- VIP 客服团队 - 处理 VIP 用户专属服务
- 国际客服团队 - 多语言支持
- 紧急响应团队 - 处理紧急问题

### 2. 集成外部系统

- CRM 系统集成 - 查询用户历史
- 工单系统集成 - 自动创建工单
- 知识库集成 - 智能搜索解决方案
- 数据分析 - 统计客服数据

### 3. 添加质检机制

- 自动检查回复质量
- 检测敏感词汇
- 评估用户满意度

---

## 相关文件

- [smart-customer-service.json](smart-customer-service.json) - 完整配置文件
- [func-agent-example.json](func-agent-example.json) - 原始示例
- [README-dev.md](../README-dev.md) - 开发者指南
