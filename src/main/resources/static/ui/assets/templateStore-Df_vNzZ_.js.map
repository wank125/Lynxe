{"version":3,"file":"templateStore-Df_vNzZ_.js","sources":["../../src/stores/sidebar.ts","../../src/composables/usePlanTemplateConfig.ts","../../src/stores/templateStore.ts"],"sourcesContent":["/*\n * Copyright 2025 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { reactive } from 'vue'\n\ntype TabType = 'list'\n\nexport class SidebarStore {\n  // Basic state (sidebar UI state only)\n  isCollapsed = false\n  currentTab: TabType = 'list'\n\n  // Actions\n  toggleSidebar() {\n    this.isCollapsed = !this.isCollapsed\n  }\n\n  switchToTab(tab: TabType) {\n    this.currentTab = tab\n  }\n}\n\nexport const sidebarStore = reactive(new SidebarStore())\n","/*\n * Copyright 2025 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PlanActApiService } from '@/api/plan-act-api-service'\nimport { PlanTemplateApiService } from '@/api/plan-template-with-tool-api-service'\nimport type {\n  InputSchemaParam,\n  PlanTemplateConfigVO,\n  StepConfig,\n  ToolConfigVO,\n} from '@/types/plan-template'\nimport { computed, reactive, ref } from 'vue'\n\n/**\n * Composable for managing PlanTemplateConfigVO\n * Provides getter and setter methods for all properties\n */\nexport function usePlanTemplateConfig() {\n  // Reactive state for PlanTemplateConfigVO\n  const config = reactive<PlanTemplateConfigVO>({\n    title: '',\n    steps: [],\n    planType: 'dynamic_agent',\n    planTemplateId: '',\n    accessLevel: 'editable',\n    serviceGroup: '',\n  })\n\n  // Loading state\n  const isLoading = ref(false)\n  const error = ref<string | null>(null)\n\n  // Flag to prevent watchers from syncing when user is updating individual properties\n  const isUserUpdating = ref(false)\n\n  // Flag to indicate that a full refresh is needed (for load, setConfig, fromJsonString, reset, version control)\n  const needsFullRefresh = ref(false)\n\n  // Version control state\n  const planVersions = ref<string[]>([])\n  const currentVersionIndex = ref(-1)\n\n  // Template list and selection state\n  const planTemplateList = ref<PlanTemplateConfigVO[]>([])\n  const selectedTemplate = ref<PlanTemplateConfigVO | null>(null)\n  const currentPlanTemplateId = ref<string | null>(null)\n\n  // Getters\n  const getTitle = () => config.title\n  const getPlanType = () => config.planType || 'dynamic_agent'\n  const getServiceGroup = () => config.serviceGroup || ''\n\n  // Setters\n  const setTitle = (title: string) => {\n    config.title = title\n  }\n\n  const setSteps = (steps: StepConfig[]) => {\n    config.steps = steps || []\n  }\n\n  const setPlanType = (planType: string) => {\n    config.planType = planType\n  }\n\n  const setPlanTemplateId = (planTemplateId: string) => {\n    config.planTemplateId = planTemplateId\n  }\n\n  const setServiceGroup = (serviceGroup: string) => {\n    config.serviceGroup = serviceGroup\n  }\n\n  const setToolConfig = (toolConfig: ToolConfigVO | undefined) => {\n    if (toolConfig === undefined) {\n      delete config.toolConfig\n    } else {\n      config.toolConfig = toolConfig\n    }\n  }\n\n  // ToolConfig getters (no getters are used, only setters)\n\n  // ToolConfig setters\n  const setToolDescription = (toolDescription: string) => {\n    if (!config.toolConfig) {\n      config.toolConfig = {}\n    }\n    config.toolConfig.toolDescription = toolDescription\n  }\n\n  const setEnableInternalToolcall = (enable: boolean) => {\n    if (!config.toolConfig) {\n      config.toolConfig = {}\n    }\n    config.toolConfig.enableInternalToolcall = enable\n  }\n\n  const setEnableHttpService = (enable: boolean) => {\n    if (!config.toolConfig) {\n      config.toolConfig = {}\n    }\n    config.toolConfig.enableHttpService = enable\n  }\n\n  const setEnableInConversation = (enable: boolean) => {\n    if (!config.toolConfig) {\n      config.toolConfig = {}\n    }\n    config.toolConfig.enableInConversation = enable\n  }\n\n  const setInputSchema = (inputSchema: InputSchemaParam[]) => {\n    if (!config.toolConfig) {\n      config.toolConfig = {}\n    }\n    config.toolConfig.inputSchema = inputSchema || []\n  }\n\n  // Get full config\n  const getConfig = (): PlanTemplateConfigVO => {\n    return { ...config }\n  }\n\n  // Set full config\n  const setConfig = (newConfig: PlanTemplateConfigVO) => {\n    needsFullRefresh.value = true\n    // Get accessLevel with backward compatibility for readOnly\n    const accessLevel = newConfig.accessLevel || (newConfig.readOnly ? 'readOnly' : 'editable')\n    const updatedConfig: PlanTemplateConfigVO = {\n      title: newConfig.title || '',\n      // Deep copy steps to preserve all properties including selectedToolKeys\n      // Convert null selectedToolKeys to empty array for consistency\n      steps: (newConfig.steps || []).map(step => ({\n        ...step,\n        selectedToolKeys: step.selectedToolKeys ?? [],\n      })),\n      planType: newConfig.planType || 'dynamic_agent',\n      planTemplateId: newConfig.planTemplateId || '',\n      accessLevel: accessLevel,\n      serviceGroup: newConfig.serviceGroup || '',\n    }\n    if (newConfig.version !== undefined) {\n      updatedConfig.version = newConfig.version\n    }\n    if (newConfig.toolConfig) {\n      updatedConfig.toolConfig = { ...newConfig.toolConfig }\n    }\n    Object.assign(config, updatedConfig)\n    // Reset flag after reactivity update\n    // Use a longer delay to ensure watchers have time to process the change\n    setTimeout(() => {\n      needsFullRefresh.value = false\n    }, 50)\n  }\n\n  // Reset to default\n  const reset = () => {\n    needsFullRefresh.value = true\n    Object.assign(config, {\n      title: '',\n      steps: [],\n      planType: 'dynamic_agent',\n      planTemplateId: '',\n      accessLevel: 'editable',\n      serviceGroup: '',\n      version: undefined,\n    })\n    // Remove toolConfig if it exists\n    if ('toolConfig' in config) {\n      delete config.toolConfig\n    }\n    planVersions.value = []\n    currentVersionIndex.value = -1\n    error.value = null\n    // Reset flag after reactivity update\n    setTimeout(() => {\n      needsFullRefresh.value = false\n    }, 0)\n  }\n\n  // Dynamically generate JSON from current config state (not cached, regenerated each time)\n  const generateJsonString = (): string => {\n    // Generate fresh JSON from current config state\n    // Ensure selectedToolKeys is always an array (not null) in the output\n    const accessLevel = config.accessLevel || (config.readOnly ? 'readOnly' : 'editable')\n    const jsonConfig: PlanTemplateConfigVO = {\n      title: config.title || '',\n      steps: (config.steps || []).map(step => ({\n        ...step,\n        // Ensure selectedToolKeys is always an array, not null\n        selectedToolKeys: step.selectedToolKeys ?? [],\n      })),\n      planType: config.planType || 'dynamic_agent',\n      planTemplateId: config.planTemplateId || '',\n      accessLevel: accessLevel,\n      serviceGroup: config.serviceGroup || '',\n    }\n    if (config.version !== undefined) {\n      jsonConfig.version = config.version\n    }\n    // Include toolConfig if it exists\n    if (config.toolConfig) {\n      jsonConfig.toolConfig = { ...config.toolConfig }\n    }\n    return JSON.stringify(jsonConfig, null, 2)\n  }\n\n  // Load config from JSON string\n  const fromJsonString = (jsonString: string) => {\n    try {\n      const parsed = JSON.parse(jsonString)\n      setConfig(parsed)\n      return true\n    } catch (err) {\n      error.value = err instanceof Error ? err.message : 'Invalid JSON format'\n      return false\n    }\n  }\n\n  // Version control methods\n  const canRollback = computed(() => {\n    return planVersions.value.length > 1 && currentVersionIndex.value > 0\n  })\n\n  const canRestore = computed(() => {\n    return (\n      planVersions.value.length > 1 && currentVersionIndex.value < planVersions.value.length - 1\n    )\n  })\n\n  const rollbackVersion = () => {\n    if (canRollback.value && currentVersionIndex.value > 0) {\n      currentVersionIndex.value--\n      const versionContent = planVersions.value[currentVersionIndex.value] || ''\n      fromJsonString(versionContent)\n    }\n  }\n\n  const restoreVersion = () => {\n    if (canRestore.value && currentVersionIndex.value < planVersions.value.length - 1) {\n      currentVersionIndex.value++\n      const versionContent = planVersions.value[currentVersionIndex.value] || ''\n      fromJsonString(versionContent)\n    }\n  }\n\n  // Update versions after save\n  const updateVersionsAfterSave = (content: string) => {\n    if (currentVersionIndex.value < planVersions.value.length - 1) {\n      planVersions.value = planVersions.value.slice(0, currentVersionIndex.value + 1)\n    }\n    planVersions.value.push(content)\n    currentVersionIndex.value = planVersions.value.length - 1\n  }\n\n  // Load from API\n  const load = async (planTemplateId: string) => {\n    if (!planTemplateId) {\n      error.value = 'Plan template ID is required'\n      return false\n    }\n\n    try {\n      isLoading.value = true\n      error.value = null\n\n      // Load config from API\n      const loadedConfig = await PlanTemplateApiService.getPlanTemplateConfigVO(planTemplateId)\n\n      // Check if this is the same template being reloaded\n      const isSameTemplate = currentPlanTemplateId.value === planTemplateId\n\n      // Update currentPlanTemplateId BEFORE setConfig to ensure watchers can detect the change\n      // If it's the same template, temporarily set to null first to trigger watch\n      if (isSameTemplate) {\n        currentPlanTemplateId.value = null\n        // Wait for the null assignment to be processed by watchers\n        await new Promise(resolve => setTimeout(resolve, 0))\n      }\n\n      // Ensure isUserUpdating is false before loading to allow sync\n      isUserUpdating.value = false\n\n      setConfig(loadedConfig)\n\n      // Update currentPlanTemplateId to ensure watchers can detect the change\n      currentPlanTemplateId.value = planTemplateId\n\n      // Force a small delay to ensure watchers have processed the changes\n      // This is especially important when reloading the same template\n      await new Promise(resolve => setTimeout(resolve, 10))\n\n      // Update selectedTemplate.value to keep it in sync with the loaded config\n      // This ensures RightPanel.vue uses the latest data from API, not stale data from template list\n      if (selectedTemplate.value?.planTemplateId === planTemplateId) {\n        selectedTemplate.value = {\n          ...selectedTemplate.value,\n          ...loadedConfig,\n        }\n      }\n\n      // Load versions for version control\n      try {\n        const versionsResponse = await PlanActApiService.getPlanVersions(planTemplateId)\n        planVersions.value = (versionsResponse as { versions?: string[] }).versions || []\n        if (planVersions.value.length > 0) {\n          currentVersionIndex.value = planVersions.value.length - 1\n        } else {\n          currentVersionIndex.value = -1\n        }\n      } catch (versionError) {\n        console.warn('Failed to load plan versions:', versionError)\n        planVersions.value = []\n        currentVersionIndex.value = -1\n      }\n\n      return true\n    } catch (err) {\n      error.value = err instanceof Error ? err.message : 'Failed to load plan template config'\n      console.error('Failed to load plan template config:', err)\n      return false\n    } finally {\n      isLoading.value = false\n    }\n  }\n\n  // Save to API\n  const save = async (): Promise<boolean> => {\n    if (!config.planTemplateId) {\n      error.value = 'Plan template ID is required'\n      return false\n    }\n\n    try {\n      isLoading.value = true\n      error.value = null\n\n      const result = await PlanTemplateApiService.createOrUpdatePlanTemplateWithTool(getConfig())\n\n      if (result.success) {\n        // Use the planTemplateId from backend response (may be different if frontend sent \"new-xxx\")\n        const actualPlanTemplateId = result.planTemplateId || config.planTemplateId\n\n        // Update local config with the actual planTemplateId from backend\n        if (actualPlanTemplateId && actualPlanTemplateId !== config.planTemplateId) {\n          console.log(\n            '[usePlanTemplateConfig] PlanTemplateId replaced by backend:',\n            config.planTemplateId,\n            '->',\n            actualPlanTemplateId\n          )\n          config.planTemplateId = actualPlanTemplateId\n        }\n\n        // Reload the template to get updated data from backend\n        if (actualPlanTemplateId) {\n          await load(actualPlanTemplateId)\n\n          // Update selectedTemplate if it matches the saved template\n          // Check both old and new planTemplateId to handle ID replacement\n          const oldPlanTemplateId = selectedTemplate.value?.planTemplateId\n          if (\n            oldPlanTemplateId === actualPlanTemplateId ||\n            oldPlanTemplateId === config.planTemplateId\n          ) {\n            const loadedConfig = getConfig()\n            selectedTemplate.value = {\n              ...selectedTemplate.value,\n              ...loadedConfig,\n              planTemplateId: actualPlanTemplateId, // Ensure using the actual ID\n            }\n          }\n\n          // Update planTemplateList if the template exists in the list\n          // Check both old and new planTemplateId\n          const templateIndex = planTemplateList.value.findIndex(\n            t => t.planTemplateId === actualPlanTemplateId || t.planTemplateId === oldPlanTemplateId\n          )\n          if (templateIndex >= 0) {\n            const loadedConfig = getConfig()\n            planTemplateList.value[templateIndex] = {\n              ...planTemplateList.value[templateIndex],\n              ...loadedConfig,\n              planTemplateId: actualPlanTemplateId, // Ensure using the actual ID\n            }\n          } else if (oldPlanTemplateId) {\n            // If template was not found in list but we have old ID, try to find and update it\n            const oldTemplateIndex = planTemplateList.value.findIndex(\n              t => t.planTemplateId === oldPlanTemplateId\n            )\n            if (oldTemplateIndex >= 0) {\n              const loadedConfig = getConfig()\n              planTemplateList.value[oldTemplateIndex] = {\n                ...planTemplateList.value[oldTemplateIndex],\n                ...loadedConfig,\n                planTemplateId: actualPlanTemplateId, // Update to new ID\n              }\n            }\n          }\n        }\n      }\n\n      return result.success\n    } catch (err) {\n      error.value = err instanceof Error ? err.message : 'Failed to save plan template config'\n      console.error('Failed to save plan template config:', err)\n      return false\n    } finally {\n      isLoading.value = false\n    }\n  }\n\n  // Validation\n  const validate = (): { isValid: boolean; errors: string[] } => {\n    const errors: string[] = []\n\n    if (!config.planTemplateId?.trim()) {\n      errors.push('Plan template ID is required')\n    }\n\n    if (!config.title?.trim()) {\n      errors.push('Title is required')\n    }\n\n    if (!config.steps || config.steps.length === 0) {\n      errors.push('At least one step is required')\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n    }\n  }\n\n  // Computed properties (isValid and hasToolConfig are not used)\n\n  // Utility function to parse date from different formats\n  const parseDateTime = (dateValue: unknown): Date => {\n    if (!dateValue) {\n      return new Date()\n    }\n\n    // If array format [year, month, day, hour, minute, second, nanosecond]\n    if (Array.isArray(dateValue) && dateValue.length >= 6) {\n      // JavaScript Date constructor months start from 0, so subtract 1\n      return new Date(\n        dateValue[0],\n        dateValue[1] - 1,\n        dateValue[2],\n        dateValue[3],\n        dateValue[4],\n        dateValue[5],\n        Math.floor(dateValue[6] / 1000000)\n      )\n    }\n\n    // If string format, parse directly\n    if (typeof dateValue === 'string') {\n      return new Date(dateValue)\n    }\n\n    // Return current time for other cases\n    return new Date()\n  }\n\n  // Action handlers (handleRollback, handleRestore, handleSave are not used)\n\n  /**\n   * Get all coordinator tools from planTemplateList\n   * Filters templates that have toolConfig with enableInternalToolcall enabled\n   * @returns Array of coordinator tools with tool configuration data\n   */\n  const getAllCoordinatorToolsFromTemplates = () => {\n    const tools: Array<{\n      toolName: string\n      toolDescription: string\n      planTemplateId: string\n      inputSchema: string\n      enableInternalToolcall: boolean\n      enableHttpService: boolean\n      enableInConversation: boolean\n      serviceGroup?: string\n    }> = []\n\n    for (const template of planTemplateList.value) {\n      // Only include templates with toolConfig\n      if (!template.toolConfig) {\n        continue\n      }\n\n      const toolConfig = template.toolConfig\n\n      // Only include tools with enableInternalToolcall enabled\n      if (!toolConfig.enableInternalToolcall) {\n        continue\n      }\n\n      // Convert inputSchema array to JSON string\n      let inputSchemaJson = '[]'\n      if (toolConfig.inputSchema && Array.isArray(toolConfig.inputSchema)) {\n        inputSchemaJson = JSON.stringify(toolConfig.inputSchema)\n      }\n\n      const tool: {\n        toolName: string\n        toolDescription: string\n        planTemplateId: string\n        inputSchema: string\n        enableInternalToolcall: boolean\n        enableHttpService: boolean\n        enableInConversation: boolean\n        serviceGroup?: string\n      } = {\n        toolName: template.title || '',\n        toolDescription: toolConfig.toolDescription || '',\n        planTemplateId: template.planTemplateId || '',\n        inputSchema: inputSchemaJson,\n        enableInternalToolcall: toolConfig.enableInternalToolcall ?? true,\n        enableHttpService: toolConfig.enableHttpService ?? false,\n        enableInConversation: toolConfig.enableInConversation ?? false,\n      }\n\n      if (template.serviceGroup) {\n        tool.serviceGroup = template.serviceGroup\n      }\n\n      tools.push(tool)\n    }\n\n    return tools\n  }\n\n  /**\n   * Get coordinator tool configuration status\n   * Determines if coordinator tools are enabled based on planTemplateList\n   * @returns boolean indicating if coordinator tools are enabled\n   */\n  const getCoordinatorToolConfig = (): boolean => {\n    // Check if there are any templates with toolConfig\n    return planTemplateList.value.some(template => template.toolConfig !== undefined)\n  }\n\n  // Helper method to wrap updates with guard flag\n  const withUpdateGuard = <T>(callback: () => T): T => {\n    isUserUpdating.value = true\n    try {\n      return callback()\n    } finally {\n      // Use setTimeout to ensure the flag is reset after reactivity updates\n      setTimeout(() => {\n        isUserUpdating.value = false\n      }, 0)\n    }\n  }\n\n  // Wrapped setters that prevent watcher syncing\n  const setStepsWithGuard = (steps: StepConfig[]) => {\n    return withUpdateGuard(() => {\n      setSteps(steps)\n    })\n  }\n\n  const setToolConfigWithGuard = (toolConfig: ToolConfigVO | undefined) => {\n    return withUpdateGuard(() => {\n      setToolConfig(toolConfig)\n    })\n  }\n\n  const setToolDescriptionWithGuard = (toolDescription: string) => {\n    return withUpdateGuard(() => {\n      setToolDescription(toolDescription)\n    })\n  }\n\n  const setEnableInternalToolcallWithGuard = (enable: boolean) => {\n    return withUpdateGuard(() => {\n      setEnableInternalToolcall(enable)\n    })\n  }\n\n  const setEnableHttpServiceWithGuard = (enable: boolean) => {\n    return withUpdateGuard(() => {\n      setEnableHttpService(enable)\n    })\n  }\n\n  const setEnableInConversationWithGuard = (enable: boolean) => {\n    return withUpdateGuard(() => {\n      setEnableInConversation(enable)\n    })\n  }\n\n  const setInputSchemaWithGuard = (inputSchema: InputSchemaParam[]) => {\n    return withUpdateGuard(() => {\n      setInputSchema(inputSchema)\n    })\n  }\n\n  return {\n    // State\n    config,\n    isLoading,\n    error,\n    isUserUpdating,\n    needsFullRefresh,\n    planVersions,\n    currentVersionIndex,\n    planTemplateList,\n    selectedTemplate,\n    currentPlanTemplateId,\n\n    // Getters\n    getTitle,\n    getPlanType,\n    getServiceGroup,\n    getConfig,\n\n    // Setters\n    setTitle,\n    setSteps,\n    setPlanType,\n    setPlanTemplateId,\n    setServiceGroup,\n    setToolConfig,\n    setToolDescription,\n    setEnableInternalToolcall,\n    setEnableHttpService,\n    setEnableInConversation,\n    setInputSchema,\n    setConfig,\n\n    // Guarded setters (prevent watcher syncing)\n    setStepsWithGuard,\n    setToolConfigWithGuard,\n    setToolDescriptionWithGuard,\n    setEnableInternalToolcallWithGuard,\n    setEnableHttpServiceWithGuard,\n    setEnableInConversationWithGuard,\n    setInputSchemaWithGuard,\n    withUpdateGuard,\n\n    // Actions\n    reset,\n    load,\n    save,\n    validate,\n    generateJsonString,\n    fromJsonString,\n    rollbackVersion,\n    restoreVersion,\n    updateVersionsAfterSave,\n\n    // Computed\n    canRollback,\n    canRestore,\n\n    // Utility functions\n    parseDateTime,\n\n    // Coordinator tools methods\n    getAllCoordinatorToolsFromTemplates,\n    getCoordinatorToolConfig,\n  }\n}\n\n// Singleton instance for global use\nlet singletonInstance: ReturnType<typeof usePlanTemplateConfig> | null = null\n\n/**\n * Get or create singleton instance of usePlanTemplateConfig\n */\nexport function usePlanTemplateConfigSingleton() {\n  if (!singletonInstance) {\n    singletonInstance = usePlanTemplateConfig()\n  }\n  return singletonInstance\n}\n","/*\n * Copyright 2025 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PlanTemplateApiService } from '@/api/plan-template-with-tool-api-service'\nimport { i18n } from '@/base/i18n'\nimport { usePlanTemplateConfigSingleton } from '@/composables/usePlanTemplateConfig'\nimport type { PlanTemplateConfigVO } from '@/types/plan-template'\nimport { computed, reactive } from 'vue'\n\nexport class TemplateStore {\n  // Loading and error state\n  isLoading = false\n  errorMessage = ''\n  // Track task requirement modifications\n  hasTaskRequirementModified = false\n\n  // Organization method: 'by_time' | 'by_abc' | 'by_group_time' | 'by_group_abc'\n  organizationMethod: 'by_time' | 'by_abc' | 'by_group_time' | 'by_group_abc' = 'by_group_time'\n\n  // Template service group mapping (templateId -> serviceGroup)\n  templateServiceGroups: Map<string, string> = new Map()\n\n  // Group collapse state (groupName -> isCollapsed)\n  // Using plain object instead of Map for Vue reactivity\n  groupCollapseState: Record<string, boolean> = {}\n\n  constructor() {\n    // Load organization method from localStorage\n    const savedMethod = localStorage.getItem('sidebarOrganizationMethod')\n    if (\n      savedMethod &&\n      ['by_time', 'by_abc', 'by_group_time', 'by_group_abc'].includes(savedMethod)\n    ) {\n      this.organizationMethod = savedMethod as\n        | 'by_time'\n        | 'by_abc'\n        | 'by_group_time'\n        | 'by_group_abc'\n    }\n    // Load group collapse state from localStorage\n    this.loadGroupCollapseState()\n  }\n\n  // Load group collapse state from localStorage\n  loadGroupCollapseState() {\n    try {\n      const saved = localStorage.getItem('sidebarGroupCollapseState')\n      if (saved) {\n        const parsed = JSON.parse(saved)\n        this.groupCollapseState = parsed || {}\n      }\n    } catch (error) {\n      console.warn('[TemplateStore] Failed to load group collapse state:', error)\n    }\n  }\n\n  // Save group collapse state to localStorage\n  saveGroupCollapseState() {\n    try {\n      localStorage.setItem('sidebarGroupCollapseState', JSON.stringify(this.groupCollapseState))\n    } catch (error) {\n      console.warn('[TemplateStore] Failed to save group collapse state:', error)\n    }\n  }\n\n  // Toggle group collapse state\n  toggleGroupCollapse(groupName: string | null) {\n    // Convert null to string key for object property access\n    const key = groupName ?? 'null'\n    const currentState = this.groupCollapseState[key] ?? false\n    this.groupCollapseState[key] = !currentState\n    this.saveGroupCollapseState()\n  }\n\n  // Check if group is collapsed\n  isGroupCollapsed(groupName: string | null): boolean {\n    // Convert null to string key for object property access\n    const key = groupName ?? 'null'\n    return this.groupCollapseState[key] ?? false\n  }\n\n  // Helper function to parse date from different formats\n  parseDateTime(dateValue: unknown): Date {\n    if (!dateValue) {\n      return new Date()\n    }\n\n    // If array format [year, month, day, hour, minute, second, nanosecond]\n    if (Array.isArray(dateValue) && dateValue.length >= 6) {\n      // JavaScript Date constructor months start from 0, so subtract 1\n      return new Date(\n        dateValue[0],\n        dateValue[1] - 1,\n        dateValue[2],\n        dateValue[3],\n        dateValue[4],\n        dateValue[5],\n        Math.floor(dateValue[6] / 1000000)\n      )\n    }\n\n    // If string format, parse directly\n    if (typeof dateValue === 'string') {\n      return new Date(dateValue)\n    }\n\n    // Return current time for other cases\n    return new Date()\n  }\n\n  // Reference to template config for accessing planTemplateList\n  private templateConfig = usePlanTemplateConfigSingleton()\n\n  // Set organization method\n  setOrganizationMethod(method: 'by_time' | 'by_abc' | 'by_group_time' | 'by_group_abc') {\n    this.organizationMethod = method\n    localStorage.setItem('sidebarOrganizationMethod', method)\n  }\n\n  // Actions\n  async loadPlanTemplateList() {\n    this.isLoading = true\n    this.errorMessage = ''\n    try {\n      console.log('[TemplateStore] Starting to load plan template list...')\n      const configVOs = await PlanTemplateApiService.getAllPlanTemplateConfigVOs()\n\n      // Use PlanTemplateConfigVO directly\n      this.templateConfig.planTemplateList.value = configVOs\n\n      // Build service group mapping\n      this.templateServiceGroups.clear()\n      for (const config of this.templateConfig.planTemplateList.value) {\n        const planTemplateId = config.planTemplateId\n        if (planTemplateId) {\n          const serviceGroup = config.serviceGroup || ''\n          if (serviceGroup) {\n            this.templateServiceGroups.set(planTemplateId, serviceGroup)\n          }\n        }\n      }\n\n      console.log(\n        `[TemplateStore] Successfully loaded ${this.templateConfig.planTemplateList.value.length} plan templates`\n      )\n    } catch (error: unknown) {\n      console.error('[TemplateStore] Failed to load plan template list:', error)\n      this.templateConfig.planTemplateList.value = []\n      const message = error instanceof Error ? error.message : 'Unknown error'\n      this.errorMessage = `Load failed: ${message}`\n    } finally {\n      this.isLoading = false\n    }\n  }\n\n  async selectTemplate(template: PlanTemplateConfigVO) {\n    this.templateConfig.currentPlanTemplateId.value = template.planTemplateId || null\n    this.templateConfig.selectedTemplate.value = template\n    // Reset modification flag when loading new template\n    this.hasTaskRequirementModified = false\n\n    console.log(`[TemplateStore] Selected plan template: ${template.planTemplateId}`)\n  }\n\n  async createNewTemplate(planType: string) {\n    try {\n      // Generate plan template ID from backend\n      const planTemplateId = await PlanTemplateApiService.generatePlanTemplateId()\n      console.log('[TemplateStore] Generated plan template ID from backend:', planTemplateId)\n\n      const emptyTemplate: PlanTemplateConfigVO = {\n        planTemplateId: planTemplateId,\n        title: i18n.global.t('sidebar.newTemplateName'),\n        planType: planType,\n        createTime: new Date().toISOString(),\n        updateTime: new Date().toISOString(),\n      }\n      this.templateConfig.selectedTemplate.value = emptyTemplate\n      this.templateConfig.currentPlanTemplateId.value = null\n\n      // Reset modification flag for new template\n      this.hasTaskRequirementModified = false\n\n      console.log('[TemplateStore] Created new empty plan template')\n    } catch (error) {\n      console.error('[TemplateStore] Failed to generate plan template ID:', error)\n      // Fallback to timestamp-based ID if backend call fails\n      const fallbackId = `planTemplate-${Date.now()}`\n      console.warn('[TemplateStore] Using fallback plan template ID:', fallbackId)\n      const emptyTemplate: PlanTemplateConfigVO = {\n        planTemplateId: fallbackId,\n        title: i18n.global.t('sidebar.newTemplateName'),\n        planType: planType,\n        createTime: new Date().toISOString(),\n        updateTime: new Date().toISOString(),\n      }\n      this.templateConfig.selectedTemplate.value = emptyTemplate\n      this.templateConfig.currentPlanTemplateId.value = null\n      this.hasTaskRequirementModified = false\n    }\n  }\n\n  async deleteTemplate(template: PlanTemplateConfigVO) {\n    const planTemplateId = template.planTemplateId\n    if (!planTemplateId) {\n      console.warn('[TemplateStore] deleteTemplate: Invalid template object or ID')\n      return\n    }\n    try {\n      await PlanTemplateApiService.deletePlanTemplate(planTemplateId)\n      if (this.templateConfig.currentPlanTemplateId.value === planTemplateId) {\n        this.clearSelection()\n      }\n      await this.loadPlanTemplateList()\n      console.log(`[TemplateStore] Plan template ${planTemplateId} has been deleted`)\n    } catch (error: unknown) {\n      console.error('Failed to delete plan template:', error)\n      await this.loadPlanTemplateList()\n      throw error\n    }\n  }\n\n  clearSelection() {\n    this.templateConfig.currentPlanTemplateId.value = null\n    this.templateConfig.selectedTemplate.value = null\n    this.hasTaskRequirementModified = false\n  }\n}\n\n// Create store instance\nconst storeInstance = new TemplateStore()\n\n// Get template config singleton for computed properties\nconst templateConfigRef = usePlanTemplateConfigSingleton()\n\n// Create reactive store first\nexport const templateStore = reactive({\n  // State properties\n  isLoading: storeInstance.isLoading,\n  errorMessage: storeInstance.errorMessage,\n  hasTaskRequirementModified: storeInstance.hasTaskRequirementModified,\n  organizationMethod: storeInstance.organizationMethod,\n  templateServiceGroups: storeInstance.templateServiceGroups,\n  groupCollapseState: storeInstance.groupCollapseState,\n\n  // Methods\n  loadGroupCollapseState: () => storeInstance.loadGroupCollapseState(),\n  saveGroupCollapseState: () => storeInstance.saveGroupCollapseState(),\n  toggleGroupCollapse: (groupName: string | null) => {\n    storeInstance.toggleGroupCollapse(groupName)\n    // Update reactive object - Vue can track object property changes directly\n    const key = groupName ?? 'null'\n    templateStore.groupCollapseState[key] = storeInstance.groupCollapseState[key]\n    // Force reactivity by creating new object reference\n    templateStore.groupCollapseState = { ...templateStore.groupCollapseState }\n  },\n  isGroupCollapsed: (groupName: string | null) => storeInstance.isGroupCollapsed(groupName),\n  parseDateTime: (dateValue: unknown) => storeInstance.parseDateTime(dateValue),\n  setOrganizationMethod: (method: 'by_time' | 'by_abc' | 'by_group_time' | 'by_group_abc') => {\n    storeInstance.setOrganizationMethod(method)\n    templateStore.organizationMethod = method\n  },\n  loadPlanTemplateList: async () => {\n    await storeInstance.loadPlanTemplateList()\n    // Update reactive properties after loading\n    templateStore.isLoading = storeInstance.isLoading\n    templateStore.errorMessage = storeInstance.errorMessage\n    templateStore.templateServiceGroups = storeInstance.templateServiceGroups\n  },\n  selectTemplate: (template: PlanTemplateConfigVO) => storeInstance.selectTemplate(template),\n  createNewTemplate: (planType: string) => storeInstance.createNewTemplate(planType),\n  deleteTemplate: (template: PlanTemplateConfigVO) => storeInstance.deleteTemplate(template),\n  clearSelection: () => storeInstance.clearSelection(),\n})\n\n// Create computed properties for reactive template lists\n// These must be defined after templateStore to access reactive properties\nconst sortedTemplatesComputed = computed(() => {\n  // Filter out readOnly templates (accessLevel === \"readOnly\")\n  const templates = [...templateConfigRef.planTemplateList.value].filter(template => {\n    const accessLevel = template.accessLevel || (template.readOnly ? 'readOnly' : 'editable')\n    return accessLevel !== 'readOnly'\n  })\n\n  switch (templateStore.organizationMethod) {\n    case 'by_time':\n      return templates.sort((a, b) => {\n        const timeA = templateStore.parseDateTime(a.updateTime ?? a.createTime)\n        const timeB = templateStore.parseDateTime(b.updateTime ?? b.createTime)\n        return timeB.getTime() - timeA.getTime()\n      })\n    case 'by_abc':\n      return templates.sort((a, b) => {\n        const titleA = (a.title ?? '').toLowerCase()\n        const titleB = (b.title ?? '').toLowerCase()\n        return titleA.localeCompare(titleB)\n      })\n    case 'by_group_time':\n    case 'by_group_abc': {\n      const groups = new Map<string, PlanTemplateConfigVO[]>()\n      const ungrouped: PlanTemplateConfigVO[] = []\n\n      templates.forEach(template => {\n        const planTemplateId = template.planTemplateId || ''\n        const serviceGroup = templateStore.templateServiceGroups.get(planTemplateId) ?? ''\n        if (!serviceGroup || serviceGroup === 'default' || serviceGroup === '') {\n          ungrouped.push(template)\n        } else {\n          if (!groups.has(serviceGroup)) {\n            groups.set(serviceGroup, [])\n          }\n          groups.get(serviceGroup)!.push(template)\n        }\n      })\n\n      const sortedGroups = new Map<string, PlanTemplateConfigVO[]>()\n      groups.forEach((templatesInGroup, groupName) => {\n        const sorted = [...templatesInGroup]\n        if (templateStore.organizationMethod === 'by_group_time') {\n          sorted.sort((a, b) => {\n            const timeA = templateStore.parseDateTime(a.updateTime ?? a.createTime)\n            const timeB = templateStore.parseDateTime(b.updateTime ?? b.createTime)\n            return timeB.getTime() - timeA.getTime()\n          })\n        } else {\n          sorted.sort((a, b) => {\n            const titleA = (a.title ?? '').toLowerCase()\n            const titleB = (b.title ?? '').toLowerCase()\n            return titleA.localeCompare(titleB)\n          })\n        }\n        sortedGroups.set(groupName, sorted)\n      })\n\n      if (templateStore.organizationMethod === 'by_group_time') {\n        ungrouped.sort((a, b) => {\n          const timeA = templateStore.parseDateTime(a.updateTime ?? a.createTime)\n          const timeB = templateStore.parseDateTime(b.updateTime ?? b.createTime)\n          return timeB.getTime() - timeA.getTime()\n        })\n      } else {\n        ungrouped.sort((a, b) => {\n          const titleA = (a.title ?? '').toLowerCase()\n          const titleB = (b.title ?? '').toLowerCase()\n          return titleA.localeCompare(titleB)\n        })\n      }\n\n      const result: PlanTemplateConfigVO[] = []\n      result.push(...ungrouped)\n      const sortedGroupNames = Array.from(sortedGroups.keys()).sort()\n      sortedGroupNames.forEach(groupName => {\n        result.push(...sortedGroups.get(groupName)!)\n      })\n      return result\n    }\n    default:\n      return templates.sort((a, b) => {\n        const timeA = templateStore.parseDateTime(a.updateTime || a.createTime || '')\n        const timeB = templateStore.parseDateTime(b.updateTime || b.createTime || '')\n        return timeB.getTime() - timeA.getTime()\n      })\n  }\n})\n\nconst groupedTemplatesComputed = computed(() => {\n  if (\n    templateStore.organizationMethod !== 'by_group_time' &&\n    templateStore.organizationMethod !== 'by_group_abc'\n  ) {\n    return new Map([[null, sortedTemplatesComputed.value]])\n  }\n\n  const groups = new Map<string | null, PlanTemplateConfigVO[]>()\n  const ungrouped: PlanTemplateConfigVO[] = []\n  const sorted = sortedTemplatesComputed.value\n\n  sorted.forEach(template => {\n    const planTemplateId = template.planTemplateId || ''\n    const serviceGroup = templateStore.templateServiceGroups.get(planTemplateId) ?? ''\n    if (!serviceGroup || serviceGroup === 'default' || serviceGroup === '') {\n      ungrouped.push(template)\n    } else {\n      if (!groups.has(serviceGroup)) {\n        groups.set(serviceGroup, [])\n      }\n      groups.get(serviceGroup)!.push(template)\n    }\n  })\n\n  const result = new Map<string | null, PlanTemplateConfigVO[]>()\n  if (ungrouped.length > 0) {\n    result.set(null, ungrouped)\n  }\n  const sortedGroupNames = Array.from(groups.keys()).sort()\n  sortedGroupNames.forEach(groupName => {\n    result.set(groupName, groups.get(groupName)!)\n  })\n\n  return result\n})\n\n// Add computed properties to reactive store using Object.defineProperty\nObject.defineProperty(templateStore, 'sortedTemplates', {\n  get: () => sortedTemplatesComputed.value,\n  enumerable: true,\n  configurable: true,\n})\n\nObject.defineProperty(templateStore, 'groupedTemplates', {\n  get: () => groupedTemplatesComputed.value,\n  enumerable: true,\n  configurable: true,\n})\n\n// Type augmentation to include computed properties\nexport interface TemplateStoreWithComputed {\n  sortedTemplates: PlanTemplateConfigVO[]\n  groupedTemplates: Map<string | null, PlanTemplateConfigVO[]>\n}\n\n// Type assertion to help TypeScript understand the computed properties\nexport type TemplateStoreType = typeof templateStore & TemplateStoreWithComputed\n"],"names":["SidebarStore","tab","sidebarStore","reactive","usePlanTemplateConfig","config","isLoading","ref","error","isUserUpdating","needsFullRefresh","planVersions","currentVersionIndex","planTemplateList","selectedTemplate","currentPlanTemplateId","getTitle","getPlanType","getServiceGroup","setTitle","title","setSteps","steps","setPlanType","planType","setPlanTemplateId","planTemplateId","setServiceGroup","serviceGroup","setToolConfig","toolConfig","setToolDescription","toolDescription","setEnableInternalToolcall","enable","setEnableHttpService","setEnableInConversation","setInputSchema","inputSchema","getConfig","setConfig","newConfig","accessLevel","updatedConfig","step","reset","generateJsonString","jsonConfig","fromJsonString","jsonString","parsed","err","canRollback","computed","canRestore","rollbackVersion","versionContent","restoreVersion","updateVersionsAfterSave","content","load","loadedConfig","PlanTemplateApiService","resolve","versionsResponse","PlanActApiService","versionError","save","result","actualPlanTemplateId","oldPlanTemplateId","templateIndex","t","oldTemplateIndex","validate","errors","parseDateTime","dateValue","getAllCoordinatorToolsFromTemplates","tools","template","inputSchemaJson","tool","getCoordinatorToolConfig","withUpdateGuard","callback","singletonInstance","usePlanTemplateConfigSingleton","TemplateStore","savedMethod","saved","groupName","key","currentState","method","configVOs","message","emptyTemplate","i18n","fallbackId","storeInstance","templateConfigRef","templateStore","sortedTemplatesComputed","templates","b","timeA","titleA","titleB","groups","ungrouped","sortedGroups","templatesInGroup","sorted","a","groupedTemplatesComputed"],"mappings":"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"}