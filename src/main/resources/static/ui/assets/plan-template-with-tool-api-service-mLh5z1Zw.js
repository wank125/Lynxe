import{d as L,u as P,r as y,c as g,ab as j,o as O,H as E,a as u,b as l,e as r,f as w,g as v,i as d,I as p,t as h,j as F,F as I,q as S,n as $,l as k,ac as R}from"./index-WjMAoR12.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"language-switcher"},x=["title"],A={class:"current-lang"},D={class:"dropdown-header"},B={class:"language-options"},U=["disabled","onClick"],q={class:"lang-code"},J={class:"lang-name"},M=L({__name:"LanguageSwitcher",setup(C){const{locale:a}=P(),e=y(!1),t=g(()=>a.value),i=g(()=>j.opts),_=g(()=>{const n=i.value.find(s=>s.value===t.value);return n?n.title:"Unknown"}),b=()=>{e.value=!e.value},c=y(!1),T=async n=>{if(!(c.value||t.value===n))try{c.value=!0,await R(n),e.value=!1}catch(s){console.error("Failed to change language:",s),e.value=!1}finally{c.value=!1}},m=n=>{n.target.closest(".language-switcher")||(e.value=!1)},f=n=>{n.key==="Escape"&&(e.value=!1)};return O(()=>{document.addEventListener("click",m),document.addEventListener("keydown",f)}),E(()=>{document.removeEventListener("click",m),document.removeEventListener("keydown",f)}),(n,s)=>(l(),u("div",N,[r("button",{class:"language-btn",onClick:b,title:n.$t("language.switch")},[v(d(p),{icon:"carbon:translate",width:"18"}),r("span",A,h(_.value),1),v(d(p),{icon:e.value?"carbon:chevron-up":"carbon:chevron-down",width:"14",class:"chevron"},null,8,["icon"])],8,x),e.value?(l(),u("div",{key:0,class:"language-dropdown",onClick:s[1]||(s[1]=F(()=>{},["stop"]))},[r("div",D,[r("span",null,h(n.$t("language.switch")),1),r("button",{class:"close-btn",onClick:s[0]||(s[0]=o=>e.value=!1)},[v(d(p),{icon:"carbon:close",width:"16"})])]),r("div",B,[(l(!0),u(I,null,S(i.value,o=>(l(),u("button",{key:o.value,class:$(["language-option",{active:t.value===o.value,loading:c.value&&t.value!==o.value}]),disabled:c.value,onClick:z=>T(o.value)},[r("span",q,h(o.value.toUpperCase()),1),r("span",J,h(o.title),1),c.value&&t.value!==o.value?(l(),k(d(p),{key:0,icon:"carbon:circle-dash",width:"16",class:"loading-icon"})):t.value===o.value?(l(),k(d(p),{key:1,icon:"carbon:checkmark",width:"16",class:"check-icon"})):w("",!0)],10,U))),128))])])):w("",!0),e.value?(l(),u("div",{key:1,class:"backdrop",onClick:s[2]||(s[2]=o=>e.value=!1)})):w("",!0)]))}}),K=V(M,[["__scopeId","data-v-6951f85e"]]);class W{static async handleResponse(a){if(!a.ok)try{const e=await a.json(),t=e.error||e.message||`API request failed: ${a.status}`,i=new Error(t);throw e.errorCode&&(i.errorCode=e.errorCode),i}catch(e){throw e instanceof Error?e:new Error(`API request failed: ${a.status} ${a.statusText}`)}return a}static async createOrUpdatePlanTemplateWithTool(a){try{const e=await fetch("/api/plan-template/create-or-update-with-tool",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to create or update plan template with tool:",e),e}}static async getPlanTemplateConfigVO(a){try{const e=await fetch(`/api/plan-template/${a}/config`);return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to get plan template config VO:",e),e}}static async getAllPlanTemplateConfigVOs(){try{const a=await fetch("/api/plan-template/list-config");return await(await this.handleResponse(a)).json()}catch(a){throw console.error("Failed to get all plan template config VOs:",a),a}}static async deletePlanTemplate(a){try{const e=await fetch("/api/plan-template/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:a})});return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to delete plan template:",e),e}}static async exportAllPlanTemplates(){try{const a=await fetch("/api/plan-template/export-all");return await(await this.handleResponse(a)).json()}catch(a){throw console.error("Failed to export all plan templates:",a),a}}static async importPlanTemplates(a){try{const e=await fetch("/api/plan-template/import-all",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to import plan templates:",e),e}}static async generatePlanTemplateId(){try{const a=await fetch("/api/plan-template/generate-plan-template-id",{method:"GET",headers:{"Content-Type":"application/json"}});return(await(await this.handleResponse(a)).json()).planTemplateId}catch(a){throw console.error("Failed to generate plan template ID:",a),a}}}export{K as L,W as P};
//# sourceMappingURL=plan-template-with-tool-api-service-mLh5z1Zw.js.map
